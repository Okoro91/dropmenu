class Dropdown{constructor(e,t={}){this.element=e,this.options={trigger:"click",closeOnClick:!0,closeOnOutsideClick:!0,...t},this.toggleButton=e.querySelector("[data-dropdown-toggle]"),this.menu=e.querySelector("[data-dropdown-menu]"),this.isOpen=!1,this.closeOverlay=null,this.init()}init(){"hover"===this.options.trigger?(this.element.addEventListener("mouseenter",()=>this.open()),this.element.addEventListener("mouseleave",()=>this.close())):this.toggleButton.addEventListener("click",e=>{e.stopPropagation(),this.toggle()}),this.options.closeOnClick&&this.menu.addEventListener("click",e=>{e.target.classList.contains("dropdown-item")&&this.close()}),this.options.closeOnOutsideClick&&document.addEventListener("click",e=>{!this.element.contains(e.target)&&this.isOpen&&this.close()}),this.menu.addEventListener("click",e=>{e.stopPropagation()})}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen||(this.isOpen=!0,this.menu.classList.add("show"),this.toggleButton.querySelector(".dropdown-arrow").classList.add("open"),Dropdown.closeAll(this),this.options.closeOnOutsideClick&&window.innerWidth<768&&this.addCloseOverlay())}close(){this.isOpen&&(this.isOpen=!1,this.menu.classList.remove("show"),this.toggleButton.querySelector(".dropdown-arrow").classList.remove("open"),this.removeCloseOverlay())}addCloseOverlay(){this.closeOverlay=document.createElement("div"),this.closeOverlay.className="dropdown-close-overlay",this.closeOverlay.addEventListener("click",()=>this.close()),document.body.appendChild(this.closeOverlay)}removeCloseOverlay(){this.closeOverlay&&(this.closeOverlay.remove(),this.closeOverlay=null)}static instances=new Map;static create(e="[data-dropdown]",t={}){document.querySelectorAll(e).forEach(e=>{Dropdown.instances.has(e)||Dropdown.instances.set(e,new Dropdown(e,t))})}static closeAll(e=null){Dropdown.instances.forEach((t,s)=>{t!==e&&t.isOpen&&t.close()})}static destroyAll(){Dropdown.instances.forEach((e,t)=>{e.destroy()}),Dropdown.instances.clear()}destroy(){this.close(),this.removeCloseOverlay(),this.element.removeEventListener("mouseenter",this.open),this.element.removeEventListener("mouseleave",this.close),this.toggleButton.removeEventListener("click",this.toggle),this.menu.removeEventListener("click",this.handleMenuClick),Dropdown.instances.delete(this.element)}}document.addEventListener("DOMContentLoaded",()=>{Dropdown.create()});export default Dropdown;